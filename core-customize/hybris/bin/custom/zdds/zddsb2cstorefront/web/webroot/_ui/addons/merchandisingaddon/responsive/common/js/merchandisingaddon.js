!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n=!1;function i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n&&console.log.apply(console,t)}function o(t){return ACC.sanitizer.sanitize(t)}var a=function(){function t(t){var e=t.strategy,r=t.url,n=t.numbertodisplay;this.tenant=this._getTenantId(),this.strategy=e,this.numberToDisplay=n,this.category=this._getCategory(),this.facets=this._getFacets(),this.siteId=this._getSiteId(),this.language=this._getLanguage(),this.url=this._buildUrl(r)}return t.prototype.getProducts=function(){return $.get(this.url)},t.prototype._buildUrl=function(t){var e=null;if(!this.strategy||!this.tenant)return null;e=t+"/"+this.tenant+"/strategies/"+this.strategy+"/products";var r="";return this.category&&(r=this._buildQueryString(r,"category="+this.category)),this.facets&&(r=this._buildQueryString(r,"facets="+this.facets)),this.numberToDisplay&&(r=this._buildQueryString(r,"pageSize="+this.numberToDisplay)),this.siteId&&(r=this._buildQueryString(r,"site="+this.siteId)),this.language&&(r=this._buildQueryString(r,"language="+this.language)),r&&(e=e+"?"+r),e},t.prototype._buildQueryString=function(t,e){return t&&(t+="&"),t+e},t.prototype._getTenantId=function(){var t=null;try{t=JSON.parse(ACC.addons.merchandisingaddon.hybrisTenant).properties.hybrisTenant}catch(t){i("JSON parser error",t)}return t},t.prototype._getCategory=function(){var t=null;try{ACC.addons.merchandisingaddon.ItemCategory&&(t=JSON.parse(ACC.addons.merchandisingaddon.ItemCategory).properties.ItemCategory)}catch(t){i("JSON parser error",t)}return t},t.prototype._getFacets=function(){var t=null;try{if(ACC.addons.merchandisingaddon.ContextFacets){var e=JSON.parse(ACC.addons.merchandisingaddon.ContextFacets);t="",e.properties.ContextFacets.forEach(function(e){e.values.forEach(function(r){t+=e.code+":"+r+":"})})}}catch(t){i("JSON parser error",t)}return t},t.prototype._getSiteId=function(){var t=null;try{t=JSON.parse(ACC.addons.merchandisingaddon.siteId).properties.siteId}catch(t){i("JSON parser error",t)}return t},t.prototype._getLanguage=function(){var t=null;try{t=JSON.parse(ACC.addons.merchandisingaddon.language).properties.language}catch(t){i("JSON parser error",t)}return t},t}();(function(){function t(t){var e=t.el,r=t.data,n=void 0===r?{}:r;this.$el=$(e),this.data=n}return t.prototype.render=function(){i("render",this.data),this.$el.html(this.getHtml()).find(".js-merch-carousel").owlCarousel({scrollPerPage:"ALLVISIBLE"===this.data.scroll,navigation:!0,navigationText:["<span class='glyphicon glyphicon-chevron-left'></span>","<span class='glyphicon glyphicon-chevron-right'></span>"],pagination:!1,itemsCustom:[[0,2],[640,4],[1024,5],[1400,7]]})},t.prototype.getHtml=function(){var t=this,e=this.data,r=e.backgroundcolour,n=e.textcolour,i="",a="",s="carousel__item--name",c="carousel__item--price";n&&(i='style="color: '+n+'"'),r&&(a='style="background-color: '+r+'"',s+=" merchcarousel_custom-color",c+=" merchcarousel_custom-color");var u=this.data.items.reduce(function(e,r){return e+'\n\t\t\t\t\t<div class="carousel__item">\n\t\t\t\t\t\t<a href="'+o(r.pageUrl)+'">\n\t\t\t\t\t\t\t<div class="carousel__item--thumb">\n\t\t\t\t\t\t\t\t<img src="'+r.mainImage+'" alt="'+o(r.name)+'" title="'+o(r.name)+'"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="'+s+'" '+o(i)+">"+o(r.name)+'</div>\n\t\t\t\t\t\t\t<div class="'+c+'" '+o(i)+">"+o(t.data.currency)+o(r.price)+"</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t"},"");return'\n\t\t\t\t<div class="carousel__component" '+o(a)+'>\n\t\t\t\t\t<div class="carousel__component--headline" '+o(i)+">"+o(this.data.title)+'</div>\n\t\t\t\t\t<div class="carousel__component--carousel js-merch-carousel">'+u+"</div>\n\t\t\t\t</div>\n\t\t\t"},t.init=function(){i("init"),Object.keys(window.__merchcarousels||{}).forEach(function(e){var r=window.__merchcarousels[e],n=r.el,o=r.inited;if(n&&!o){var s=n.dataset,c=s.numbertodisplay,u=s.title,l=s.currency,d=s.strategy,g=s.scroll,p=s.url,h=s.backgroundcolour,y=s.textcolour;r.inited=!0;var f=new a({strategy:d,url:p,numbertodisplay:+c});i("inited"),f.getProducts().then(function(e){i("data received",e);var r=null;e&&e.products&&(r=0!=+c?e.products.slice(0,+c):e.products),i("numbertodisplay",c),i("items",r),r&&r.length&&null!=$.fn.owlCarousel&&(new t({el:n,data:{scroll:g,items:r,title:u,currency:l,backgroundcolour:h,textcolour:y}}).render(),i("rendered"))})}}),window.__merchcarousels=window.__merchcarousels||{},window.__merchcarousels.CarouselComponent=t},t})().init()}]);